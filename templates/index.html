<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä QR-–∫–æ–¥–æ–≤</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>üöÄ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä QR-–∫–æ–¥–æ–≤</h1>
        <p class="subtitle">–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∏–ª–∏ —Å—Å—ã–ª–∫—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è QR-–∫–æ–¥–∞</p>

        <form method="POST" action="/">
            <div class="input-group">
                <input type="text"
                       name="data"
                       placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∏–ª–∏ —Å—Å—ã–ª–∫—É..."
                       value="{{ request.form.data if request.form.data else '' }}"
                       required
                       autofocus>
            </div>
            <button type="submit" class="btn-generate">
                üì± –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥
            </button>
        </form>

        {% if qr_image %}
        <div class="qr-container">
            <h2>‚úÖ –í–∞—à QR-–∫–æ–¥ –≥–æ—Ç–æ–≤:</h2>
            <div class="qr-image-wrapper">
                <img src="data:image/png;base64,{{ qr_image }}"
                     alt="QR Code"
                     class="qr-image">
            </div>

            <div class="actions">
                <a href="{{ url_for('download_qr', qr_id=qr_id) }}"
                   class="btn-download">
                    ‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å QR-–∫–æ–¥
                </a>

                <button onclick="window.location.href='/'"
                        class="btn-new">
                    üîÑ –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π
                </button>
            </div>

            <div class="hint">
                <p>üí° –ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –Ω–∞ QR-–∫–æ–¥, —á—Ç–æ–±—ã –ø—Ä–æ—á–∏—Ç–∞—Ç—å –µ–≥–æ</p>
            </div>
        </div>
        {% endif %}

        <div class="footer">
            <p>–°–æ–∑–¥–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é Python Flask | QR-–∫–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç:
               <span class="data-preview">
                   {% if qr_image and request.form.data %}
                       {{ request.form.data[:50] }}{% if request.form.data|length > 50 %}...{% endif %}
                   {% endif %}
               </span>
            </p>
        </div>
    </div>
</body>
</html>